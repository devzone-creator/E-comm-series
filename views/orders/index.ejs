<%- include('../partials/head') %>

<div class="container mx-auto px-4 py-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold text-gray-900 mb-8">My Orders</h1>

        <% if (orders.length === 0) { %>
            <div class="text-center py-12">
                <div class="text-gray-400 mb-4">
                    <svg class="mx-auto h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                    </svg>
                </div>
                <h3 class="text-lg font-medium text-gray-900 mb-2">No orders yet</h3>
                <p class="text-gray-500 mb-6">You haven't placed any orders yet. Start shopping to see your orders here.</p>
                <a href="/shop" class="bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition duration-200">
                    Start Shopping
                </a>
            </div>
        <% } else { %>
            <div class="space-y-6">
                <% orders.forEach(order => { %>
                    <div class="bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden">
                        <div class="p-6">
                            <div class="flex items-center justify-between mb-4">
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-900">
                                        Order #<%= order.order_number %>
                                    </h3>
                                    <p class="text-sm text-gray-500">
                                        Placed on <%= new Date(order.created_at).toLocaleDateString() %>
                                    </p>
                                </div>
                                <div class="text-right">
                                    <div class="text-lg font-semibold text-gray-900">
                                        ₵<%= parseFloat(order.total).toFixed(2) %>
                                    </div>
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
                                        <% if (order.status === 'pending') { %>
                                            bg-yellow-100 text-yellow-800
                                        <% } else if (order.status === 'confirmed') { %>
                                            bg-blue-100 text-blue-800
                                        <% } else if (order.status === 'shipped') { %>
                                            bg-purple-100 text-purple-800
                                        <% } else if (order.status === 'delivered') { %>
                                            bg-green-100 text-green-800
                                        <% } else if (order.status === 'cancelled') { %>
                                            bg-red-100 text-red-800
                                        <% } %>
                                    ">
                                        <%= order.status.charAt(0).toUpperCase() + order.status.slice(1) %>
                                    </span>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between">
                                <div class="text-sm text-gray-600">
                                    <%= order.item_count %> item<%= order.item_count > 1 ? 's' : '' %>
                                </div>
                                <a href="/orders/<%= order.id %>" 
                                   class="text-blue-600 hover:text-blue-800 text-sm font-medium">
                                    View Details →
                                </a>
                            </div>
                        </div>
                    </div>
                <% }) %>
            </div>

            <!-- Pagination -->
            <% if (pagination.pages > 1) { %>
                <div class="mt-8 flex justify-center">
                    <nav class="flex items-center space-x-2">
                        <% if (pagination.page > 1) { %>
                            <a href="/orders?page=<%= pagination.page - 1 %>" 
                               class="px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50">
                                Previous
                            </a>
                        <% } %>
                        
                        <% for (let i = 1; i <= pagination.pages; i++) { %>
                            <a href="/orders?page=<%= i %>" 
                               class="px-3 py-2 text-sm font-medium <%= pagination.page === i ? 'text-blue-600 bg-blue-50 border-blue-500' : 'text-gray-500 bg-white border-gray-300' %> border rounded-md hover:bg-gray-50">
                                <%= i %>
                            </a>
                        <% } %>
                        
                        <% if (pagination.page < pagination.pages) { %>
                            <a href="/orders?page=<%= pagination.page + 1 %>" 
                               class="px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50">
                                Next
                            </a>
                        <% } %>
                    </nav>
                </div>
            <% } %>
        <% } %>
    </div>
</div>

<%- include('../partials/footer') %>